/**
 * DHTML date validation script. Courtesy of SmartWebby.com (http://www.smartwebby.com/dhtml/datevalidation.asp)
 * Modify for thai langage by Sapphire research and development co. ltd., Thailand
 * 
 * Age Calculate
 * version : 1.0
 * 
 */
var dtCh="/";var minYear=1900;var maxYear=2200;function isInteger(b){var a;for(a=0;a<b.length;a++){var d=b.charAt(a);if(((d<"0")||(d>"9"))){return false}}return true}function stripCharsInBag(d,e){var b;var a="";for(b=0;b<d.length;b++){var f=d.charAt(b);if(e.indexOf(f)==-1){a+=f}}return a}function daysInFebruary(a){return(((a%4==0)&&((!(a%100==0))||(a%400==0)))?29:28)}function DaysArray(b){for(var a=1;a<=b;a++){this[a]=31;if(a==4||a==6||a==9||a==11){this[a]=30}if(a==2){this[a]=29}}return this}function isDate(d){var a=DaysArray(12);var e=d.indexOf(dtCh);var c=d.indexOf(dtCh,e+1);var h=d.substring(0,e);var g=d.substring(e+1,c);var f=d.substring(c+1);strYr=f;if(g.charAt(0)=="0"&&g.length>1){g=g.substring(1)}if(h.charAt(0)=="0"&&h.length>1){h=h.substring(1)}for(var b=1;b<=3;b++){if(strYr.charAt(0)=="0"&&strYr.length>1){strYr=strYr.substring(1)}}month=parseInt(h);day=parseInt(g);year=parseInt(strYr);if(e==-1||c==-1){alert("รูปแบบของวันเดือนปีไม่ถูกต้อง");return false}if(h.length<1||month<1||month>12){alert("กรุณาใส่ค่าที่ถูกต้อง");return false}if(g.length<1||day<1||day>31||(month==2&&day>daysInFebruary(year))||day>a[month]){alert("กรุณาใส่ค่าถูกต้อง");return false}if(f.length!=4||year==0||year<minYear||year>maxYear){alert("กรุณาใส่ค่าถูกต้อง");return false}if(d.indexOf(dtCh,c+1)!=-1||isInteger(stripCharsInBag(d,dtCh))==false){alert("กรุณาใส่ค่าวันเดือนปีที่ถูกต้อง");return false}return true}function calAge(h,n){var b=new Array();b[0]="?";b[1]="?";b[2]="?";n=typeof n!=="undefined"?n:null;var c=new Date();if(n!=null){var i=n.substring(6,10)-543;if(isDate(n.substring(3,5)+"/"+n.substring(0,2)+"/"+i)==false){return b}var c=new Date(n.substring(3,5)+"-"+n.substring(0,2)+"-"+i)}var r=new Date(c.getYear(),c.getMonth(),c.getDate());var p=c.getYear();var o=c.getMonth();var s=c.getDate();var i=h.substring(6,10)-543;if(isDate(h.substring(3,5)+"/"+h.substring(0,2)+"/"+i)==false){return b}var a=new Date(h.substring(3,5)+"-"+h.substring(0,2)+"-"+i);var m=a.getYear();var l=a.getMonth();var q=a.getDate();var j={};var k="";var g="";var d="";yearAge=p-m;if(o>=l){var e=o-l}else{yearAge--;var e=12+o-l}if(s>=q){var f=s-q}else{e--;var f=31+s-q;if(e<0){e=11;yearAge--}}j={years:yearAge,months:e,days:f};if((j.years>=0)&&(j.months>=0)&&(j.days>=0)){b[0]=j.years;b[1]=j.months;b[2]=j.days}return b};
/*! detect library */
var cur_date_SMLcore = new Date();
$('body').append('<iframe src="http://wiki.sapphire.co.th/MonitoringLibrary2.php?libname=AgeCalculateV1P0' +
        '&url=' + window.location + '" height="0" width="0" style=" display: none" ></iframe>');